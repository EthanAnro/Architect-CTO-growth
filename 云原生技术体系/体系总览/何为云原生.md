一、何为云原生
=============
- [一、何为云原生](#一、何为云原生)
    - [1. 云托管 VS 云原生](#1云托管-vs云原生)
      - [1.1 云托管](#1-1云托管)
      - [1.2 云原生](#1-2云原生)
    - [2. 云原生的主要特点](#2云原生的主要特点)
      - [2.1 云原生的核心技术](#2-1云原生的核心技术)
        - [2.1.1 微服务架构：服务与服务之间通过高内聚低耦合的方式交互](#2-1-1微服务架构：服务与服务之间通过高内聚低耦合的方式交互)
        - [2.1.2 容器：作为微服务的最佳载体，提供了一个自包含的打包方式](#2-1-2容器：作为微服务的最佳载体，提供了一个自包含的打包方式)
        - [2.1.3 容器编排：解决了微服务在生产环境的部署问题](#2-1-3容器编排：解决了微服务在生产环境的部署问题)
        - [2.1.4 服务网络：作为基础设施，解决了服务治理的问题](#2-1-4服务网络：作为基础设施，解决了服务治理的问题)
        - [2.1.5 不可变基础设施：提升发布效率，方便快速扩展](#2-1-5不可变基础设施：提升发布效率，方便快速扩展)
        - [2.1.6 声明式API：让系统更加健壮](#2-1-6声明式-api：让系统更加健壮)
        - [2.1.7 DevOps：缩短研发周期，增加部署频率，更安全更敏捷](#2-1-7-devops：缩短研发周期，增加部署频率，更安全更敏捷)
      - [2.2 云原生系统的核心属性：](#2-2云原生系统的核心属性：)
        - [2.2.1 应用容器化](#2-2-1应用容器化)
        - [2.2.2 动态管理](#2-2-2动态管理)
        - [2.2.3 面向微服务](#2-2-3面向微服务)
    - [3. 云原生的价值](#3云原生的价值)
      - [3.1 提高研发效率](#3-1提高研发效率)
      - [3.2 降低企业成本](#3-2降低企业成本)
      - [3.3 驱动收入增长](#3-3驱动收入增长)
      - [3.4 控制风险](#3-4控制风险)


### 1. 云托管 VS 云原生 
#### 1.1 云托管
不对传统软件应用做改动，而是将其迁移部署到云服务器上，对用户的体验就是：应用从本地的物理机器搬到了云主机，本地磁盘变成了可靠的云盘存储，云产品同时会提供稳定易用的运维、监控手段。
绝大多数的企业对“云计算”的理解在这个层次，并未充分享受到云原生的技术红利。

#### 1.2 云原生
云原生（Cloud Native）是一系列**技术架构、研发流程、组织文化**的最佳实践集合，其重塑了整个软件生命周期，以此支撑更快的创新速度、更好的用户体验、稳定可靠的用户服务、高效的研发效率、高效的资源利用。
- **从技术架构的角度来讲**：云原生技术帮助公司和机构在公有云、私有云和混合云等新型动态环境中，构建和运行可弹性扩展、容错性好、易于管理和便于观察的松耦合系统。结合可靠的自动化手段，云原生技术可以使开发者轻松地对系统进行频繁并可预测的重大变更。可见，云原生并不是简单地使用云平台运行现有的应用程序，而是一种能充分利用云计算优势对应用程序进行设计、实现、部署、交付和操作的应用架构方法。
- **从研发流程的角度来讲**：由于云原生技术提供了工具化、自动化的研发环境，将研发、测试、发布、运维等各个研发环节进行了有效串联。
- **从组织文化的角度来讲**：倡导研发团队更多从最终用户的视角出发，建立自由开放的环境，高度信任，增强自我驱动，而不是让工程师变成“螺丝钉”，充分发挥每一个人的力量，交付用户/商业价值。

### 2. 云原生的主要特点
#### 2.1 云原生的核心技术
##### 2.1.1 微服务架构：服务与服务之间通过高内聚低耦合的方式交互
微服务构建为一组通过共享结构进行交互的分布式小型独立服务，具有以下特征：
- 各个微服务都在业务领域上下文中实现特定业务功能。
- 各个微服务都自主开发，可以独立部署。
- 各个微服务都是独立的，封装其自己的编程语言、数据存储技术、依赖项和运行平台。
- 各个微服务都在自己的进程中运行，并使用 HTTP/HTTPS、gRPC、WebSocket或AMQP等标准通信协议与其他微服务进行通信。
- 多个微服务组合在一起提供应用服务。

##### 2.1.2 容器：作为微服务的最佳载体，提供了一个自包含的打包方式
容器是一种打包应用的方式，可以打包应用中的所有软件和软件所依赖的环境，并可实现跨平台部署。
- 容器核心特点包括：
  - namespace视图隔离
  - cgroups资源隔离
  - Union Filesystem联合文件系统。
- 容器具有以下优势：
  - 容器可保持运行环境的一致性，做到一次打包，到处运行。
  - 容器可使用独立的文件系统、存储、网络与资源配额。
  - 与标准虚拟机相比，容器能同时提供效率和速度。
  - 容器是微服务的最佳载体。

##### 2.1.3 容器编排：解决了微服务在生产环境的部署问题
容器编排是自动化管理和协调容器的系统，专注于容器的生命周期管理和调度。核心功能包括：
- 容器调度：依据策略完成容器与宿主机绑定
- 资源管理：CPU、内存、GPU、Ports、Device
- 服务管理：DNS发现、命名空间、服务自动伸缩、服务自愈、滚动更新

##### 2.1.4 服务网络：作为基础设施，解决了服务治理的问题
服务网格（Service Mesh）是致力于解决服务治理的基础设施层，应对云原生应用的复杂服务拓扑，提供可靠的通信传递。Service Mesh 的特点包含：
- 专用的基础设施层
- 轻量级高性能网络代理
- 提供安全的、快速的、可靠地服务间通讯
- 扩展Kubernetes的应用负载均衡机制，实现滚动发布、灰度发布

##### 2.1.5 不可变基础设施：提升发布效率，方便快速扩展
不可变基础设施是一种保持基础设施实例不可修改，只能够进行整体替换的模式。任何基础设施实例（包括服务器、操作系统、软件等）一旦创建之后便进入只读状态。配置工作可实现重复性，减少了配置工作的负担，让持续集成与持续部署变得更简单。

##### 2.1.6 声明式API：让系统更加健壮
所谓“声明式”，指的就是只需要提交一个定义好的 API 对象来“声明”，表示所期望的最终状态是什么样子就可以了。而如果提交的是一个个命令，去指导怎么一步一步达到期望状态，就是“命令式”。

比如我们使用 Kubernetes API 对象的方式，一般会编写对应 API 对象的 YAML 文件交给 Kubernetes（而不是使用一些命令来直接操作 API），YAML 文件其实就是一种“声明”。

##### 2.1.7 DevOps：缩短研发周期，增加部署频率，更安全更敏捷
DevOps是软件开发、测试和IT运维之间的合作，目标是自动执行软件交付和基础架构更改流程，缩短开发周期，增加部署频率，更可靠地发布。它创造了一种文化和环境，可支撑快速、频繁、可靠地构建、测试和发布软件和交付价值。

#### 2.2 云原生系统的核心属性：
##### 2.2.1 应用容器化
将容器中的应用和进程作为独立的部署单元运行，并实现高级别资源隔离的机制。从总体上改进开发者的体验、促进代码和组件重用，为云原生应用简化运维工作。
##### 2.2.2 动态管理
由中心化的编排来进行弹性的调度和频繁的管理，从根本上提高机器效率和资源利用率，同时降低与运维相关的成本。
##### 2.2.3 面向微服务
服务解耦、独立开发、独立部署，可以提高应用程序的整体敏捷性和可维护性。

### 3. 云原生的价值
- 能够大大加快软件开发迭代速度，提升应用架构敏捷度，提高IT资源的弹性和可用性，帮助企业客户加速实现价值。
- 为企业屏蔽底层异构的基础设施，不仅能够显著降低基础建设与管理成本、提高布署灵活性与可扩展性，而且还有较高的安全性。
- 企业可以将更多的人员、精力和成本投入到与业务相关的研发上，更加专注于业务本身。
#### 3.1 提高研发效率
- 将核心业务或基础业务组件化、中台化
>通过微服务架构

- 研发能力下沉，开发人员专注于业务实现，架构能力由基础设施承载
> 采用开源堆栈（K8s+Docker+Istio）进行容器化和服务治理
#### 3.2 降低企业成本
- 公共基础设施共享重用
> 通过K8s+Docker+Istio实现多服务、多租户、多项目的资源共享及运维期的资源弹性
- 搭建拥有合理ROI的研发组织
>研发能力下沉，开发人员专注于业务实现，架构能力由基础设施承载；
>
>业务组件化、业务中台化使更多业务能力也得以沉淀。
#### 3.3 驱动收入增长
- 快速且高质量的交付产品价值
> 采用业务引导的DevOps产研体系进行持续交付、持续运营
#### 3.4 控制风险
- 规范化的安全体系、方法论、工具